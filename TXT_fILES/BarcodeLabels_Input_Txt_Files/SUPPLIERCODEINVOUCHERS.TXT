;===============================================================================
; SUPPLIERCODEINVOUCHERS.TXT
; Created By: pg on 2012-01-07 16:25
; Purpose: Adds supplier/party code display and validation to vouchers in Tally.
;          Displays the party code in the consignee line and warns if missing.
;===============================================================================

;------------------------------------------------------------------------------
; Add supplier code field to the consignee line in voucher entry
;------------------------------------------------------------------------------

[#line : eiconsignee]
add : field : sp7,snf9
Local: Field: snf9: Skip: Yes
Local: Field: snf9: Set As: $cwpartycode:ledger:$partyledgername      ; Display party code from ledger master
Local: Field: snf9: storage: cwSupplierCode                           ; Store the code in the voucher
;; {01.Jun.18 15:05} Local: Field: snf9: Border: thin box
Local: Field: sp7: info: "Code:"
local: field: sp7: Invisible: not @@cwShowPartyAliasinEntry           ; Hide if feature not enabled

;------------------------------------------------------------------------------
; Notify user if party code is missing when required
;------------------------------------------------------------------------------

[#field : ei value total]
notify : CWLedgerCodeBlank : @@cwShowPartyAliasinEntry and  @@cwWarnonEmptypartyCode and $$isempty:$cwSupplierCode

;------------------------------------------------------------------------------
; System formula for notification message
;------------------------------------------------------------------------------

[System: Formula]
CWLedgerCodeBlank : "Please provide Party Code"
